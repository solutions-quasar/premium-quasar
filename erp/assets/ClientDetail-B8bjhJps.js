import{c as A,h as p,H as ye,I as be,J as he,K as _e,L as R,M as de,t as b,N as xe,C as Q,O as D,P as ce,R as me,S as H,T as Ce,U as qe,V as M,W as E,X as U,Y as ne,Z as we,$ as N,a0 as O,a1 as ie,a2 as Pe,a3 as le,a4 as Se,a5 as ke,r as W,a6 as Te,a7 as Qe,a8 as De,a9 as Ae,aa as Ve,_ as $e,b as Ee,s as Ie,ab as Be,q as Le,e as K,w as l,v as Ne,x as je,o as k,y as F,f as a,ac as ze,m as h,k as P,ad as se,g as Re,ae as j,af as I,j as x,p as Me,l as Ue,E as Oe,z as q,ag as oe,ah as Ke,ai as Fe,F as Xe,D as Ye,n as We,aj as T}from"./index-ooLxYGq-.js";import{Q as He,a as re}from"./QMenu-B7m3y_B1.js";import{C as Je}from"./ClosePopup-DP9AVQP7.js";const Ze=A({name:"QSpace",setup(){const e=p("div",{class:"q-space"});return()=>e}}),X=A({name:"QTab",props:be,emits:ye,setup(e,{slots:n,emit:u}){const{renderTab:c}=he(e,n,u);return()=>c("div")}}),Ge=A({name:"QTimelineEntry",props:{heading:Boolean,tag:{type:String,default:"h3"},side:{type:String,default:"right",validator:e=>["left","right"].includes(e)},icon:String,avatar:String,color:String,title:String,subtitle:String,body:String},setup(e,{slots:n}){const u=_e(de,R);if(u===R)return console.error("QTimelineEntry needs to be child of QTimeline"),R;const c=b(()=>`q-timeline__entry q-timeline__entry--${e.side}`+(e.icon!==void 0||e.avatar!==void 0?" q-timeline__entry--icon":"")),y=b(()=>`q-timeline__dot text-${e.color||u.color}`),t=b(()=>u.layout==="comfortable"&&u.side==="left");return()=>{const s=xe(n.default,[]);if(e.body!==void 0&&s.unshift(e.body),e.heading===!0){const _=[p("div"),p("div"),p(e.tag,{class:"q-timeline__heading-title"},s)];return p("div",{class:"q-timeline__heading"},t.value===!0?_.reverse():_)}let i;e.icon!==void 0?i=[p(Q,{class:"row items-center justify-center",name:e.icon})]:e.avatar!==void 0&&(i=[p("img",{class:"q-timeline__dot-img",src:e.avatar})]);const f=[p("div",{class:"q-timeline__subtitle"},[p("span",{},D(n.subtitle,[e.subtitle]))]),p("div",{class:y.value},i),p("div",{class:"q-timeline__content"},[p("h6",{class:"q-timeline__title"},D(n.title,[e.title]))].concat(s))];return p("li",{class:c.value},t.value===!0?f.reverse():f)}}}),et=A({name:"QTimeline",props:{...ce,color:{type:String,default:"primary"},side:{type:String,default:"right",validator:e=>["left","right"].includes(e)},layout:{type:String,default:"dense",validator:e=>["dense","comfortable","loose"].includes(e)}},setup(e,{slots:n}){const u=H(),c=me(e,u.proxy.$q);Ce(de,e);const y=b(()=>`q-timeline q-timeline--${e.layout} q-timeline--${e.layout}--${e.side}`+(c.value===!0?" q-timeline--dark":""));return()=>p("ul",{class:y.value},D(n.default))}});function tt(e){const n=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((u,c)=>{const y=parseFloat(u);y&&(n[c]=y)}),n}const at=qe({name:"touch-swipe",beforeMount(e,{value:n,arg:u,modifiers:c}){if(c.mouse!==!0&&E.has.touch!==!0)return;const y=c.mouseCapture===!0?"Capture":"",t={handler:n,sensitivity:tt(u),direction:ne(c),noop:we,mouseStart(s){le(s,t)&&Se(s)&&(N(t,"temp",[[document,"mousemove","move",`notPassive${y}`],[document,"mouseup","end","notPassiveCapture"]]),t.start(s,!0))},touchStart(s){if(le(s,t)){const i=s.target;N(t,"temp",[[i,"touchmove","move","notPassiveCapture"],[i,"touchcancel","end","notPassiveCapture"],[i,"touchend","end","notPassiveCapture"]]),t.start(s)}},start(s,i){E.is.firefox===!0&&U(e,!0);const f=ie(s);t.event={x:f.left,y:f.top,time:Date.now(),mouse:i===!0,dir:!1}},move(s){if(t.event===void 0)return;if(t.event.dir!==!1){O(s);return}const i=Date.now()-t.event.time;if(i===0)return;const f=ie(s),_=f.left-t.event.x,g=Math.abs(_),w=f.top-t.event.y,d=Math.abs(w);if(t.event.mouse!==!0){if(g<t.sensitivity[1]&&d<t.sensitivity[1]){t.end(s);return}}else if(window.getSelection().toString()!==""){t.end(s);return}else if(g<t.sensitivity[2]&&d<t.sensitivity[2])return;const o=g/i,m=d/i;t.direction.vertical===!0&&g<d&&g<100&&m>t.sensitivity[0]&&(t.event.dir=w<0?"up":"down"),t.direction.horizontal===!0&&g>d&&d<100&&o>t.sensitivity[0]&&(t.event.dir=_<0?"left":"right"),t.direction.up===!0&&g<d&&w<0&&g<100&&m>t.sensitivity[0]&&(t.event.dir="up"),t.direction.down===!0&&g<d&&w>0&&g<100&&m>t.sensitivity[0]&&(t.event.dir="down"),t.direction.left===!0&&g>d&&_<0&&d<100&&o>t.sensitivity[0]&&(t.event.dir="left"),t.direction.right===!0&&g>d&&_>0&&d<100&&o>t.sensitivity[0]&&(t.event.dir="right"),t.event.dir!==!1?(O(s),t.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Pe(),t.styleCleanup=S=>{t.styleCleanup=void 0,document.body.classList.remove("non-selectable");const V=()=>{document.body.classList.remove("no-pointer-events--children")};S===!0?setTimeout(V,50):V()}),t.handler({evt:s,touch:t.event.mouse!==!0,mouse:t.event.mouse,direction:t.event.dir,duration:i,distance:{x:g,y:d}})):t.end(s)},end(s){t.event!==void 0&&(M(t,"temp"),E.is.firefox===!0&&U(e,!1),t.styleCleanup?.(!0),s!==void 0&&t.event.dir!==!1&&O(s),t.event=void 0)}};if(e.__qtouchswipe=t,c.mouse===!0){const s=c.mouseCapture===!0||c.mousecapture===!0?"Capture":"";N(t,"main",[[e,"mousedown","mouseStart",`passive${s}`]])}E.has.touch===!0&&N(t,"main",[[e,"touchstart","touchStart",`passive${c.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,n){const u=e.__qtouchswipe;u!==void 0&&(n.oldValue!==n.value&&(typeof n.value!="function"&&u.end(),u.handler=n.value),u.direction=ne(n.modifiers))},beforeUnmount(e){const n=e.__qtouchswipe;n!==void 0&&(M(n,"main"),M(n,"temp"),E.is.firefox===!0&&U(e,!1),n.styleCleanup?.(),delete e.__qtouchswipe)}});function nt(){let e=Object.create(null);return{getCache:(n,u)=>e[n]===void 0?e[n]=typeof u=="function"?u():u:e[n],setCache(n,u){e[n]=u},hasCache(n){return Object.hasOwnProperty.call(e,n)},clearCache(n){n!==void 0?delete e[n]:e=Object.create(null)}}}const it={name:{required:!0},disable:Boolean},ue={setup(e,{slots:n}){return()=>p("div",{class:"q-panel scroll",role:"tabpanel"},D(n.default))}},lt={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},st=["update:modelValue","beforeTransition","transition"];function ot(){const{props:e,emit:n,proxy:u}=H(),{getCache:c}=nt(),{registerTimeout:y}=ke();let t,s;const i=W(null),f={value:null};function _(r){const v=e.vertical===!0?"up":"left";$((u.$q.lang.rtl===!0?-1:1)*(r.direction===v?1:-1))}const g=b(()=>[[at,_,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),w=b(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),d=b(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),o=b(()=>`--q-transition-duration: ${e.transitionDuration}ms`),m=b(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),S=b(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),V=b(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);Te(()=>e.modelValue,(r,v)=>{const C=B(r)===!0?z(r):-1;s!==!0&&ee(C===-1?0:C<z(v)?-1:1),f.value!==C&&(f.value=C,n("beforeTransition",r,v),y(()=>{n("transition",r,v)},e.transitionDuration))});function J(){$(1)}function Z(){$(-1)}function G(r){n("update:modelValue",r)}function B(r){return r!=null&&r!==""}function z(r){return t.findIndex(v=>v.props.name===r&&v.props.disable!==""&&v.props.disable!==!0)}function ve(){return t.filter(r=>r.props.disable!==""&&r.props.disable!==!0)}function ee(r){const v=r!==0&&e.animated===!0&&f.value!==-1?"q-transition--"+(r===-1?w.value:d.value):null;i.value!==v&&(i.value=v)}function $(r,v=f.value){let C=v+r;for(;C!==-1&&C<t.length;){const L=t[C];if(L!==void 0&&L.props.disable!==""&&L.props.disable!==!0){ee(r),s=!0,n("update:modelValue",L.props.name),setTimeout(()=>{s=!1});return}C+=r}e.infinite===!0&&t.length!==0&&v!==-1&&v!==t.length&&$(r,r===-1?t.length:-1)}function te(){const r=z(e.modelValue);return f.value!==r&&(f.value=r),!0}function ae(){const r=B(e.modelValue)===!0&&te()&&t[f.value];return e.keepAlive===!0?[p(Ae,S.value,[p(V.value===!0?c(m.value,()=>({...ue,name:m.value})):ue,{key:m.value,style:o.value},()=>r)])]:[p("div",{class:"q-panel scroll",style:o.value,key:m.value,role:"tabpanel"},[r])]}function pe(){if(t.length!==0)return e.animated===!0?[p(Qe,{name:i.value},ae)]:ae()}function fe(r){return t=De(D(r.default,[])).filter(v=>v.props!==null&&v.props.slot===void 0&&B(v.props.name)===!0),t.length}function ge(){return t}return Object.assign(u,{next:J,previous:Z,goTo:G}),{panelIndex:f,panelDirectives:g,updatePanelsList:fe,updatePanelIndex:te,getPanelContent:pe,getEnabledPanels:ve,getPanels:ge,isValidPanelName:B,keepAliveProps:S,needsUniqueKeepAliveWrapper:V,goToPanelByOffset:$,goToPanel:G,nextPanel:J,previousPanel:Z}}const Y=A({name:"QTabPanel",props:it,setup(e,{slots:n}){return()=>p("div",{class:"q-tab-panel",role:"tabpanel"},D(n.default))}}),rt=A({name:"QTabPanels",props:{...lt,...ce},emits:st,setup(e,{slots:n}){const u=H(),c=me(e,u.proxy.$q),{updatePanelsList:y,getPanelContent:t,panelDirectives:s}=ot(),i=b(()=>"q-tab-panels q-panel-parent"+(c.value===!0?" q-tab-panels--dark q-dark":""));return()=>(y(n),Ve("div",{class:i.value},t(),"pan",e.swipeable,()=>s.value))}}),ut={key:0,class:"row justify-center q-pt-xl"},dt={key:1,class:"animate-fade"},ct={class:"row items-center q-mb-md"},mt={class:"text-h4 text-white q-mt-md text-weight-bold"},vt={class:"text-subtitle1 text-gold"},pt={class:"row justify-center q-mt-sm"},ft={class:"text-grey-4"},gt={class:"text-center text-grey q-py-xl"},yt={__name:"ClientDetail",setup(e){const n=Be(),u=je(),c=Ee(),{clients:y}=Ie(c),t=W("activity"),s=W(""),i=b(()=>y.value.find(d=>d.id===n.params.id));Le(()=>{c.init()});const f=b(()=>{if(!i.value)return[];const d=[];return i.value.lastCallDate&&d.push({title:"Call logged",date:new Date(i.value.lastCallDate).toLocaleDateString(),desc:`Result: ${i.value.lastCallResult}`,color:"orange",icon:"call"}),d.push({title:"Lead Created",date:new Date(i.value.createdAt||Date.now()).toLocaleDateString(),desc:"Added to system",color:"grey",icon:"add"}),d});function _(d){return d?d.substring(0,2).toUpperCase():"??"}function g(d){switch(d){case"Lead":return"blue-grey";case"Prospect":return"info";case"Client":return"positive";case"Churned":return"negative";default:return"grey"}}async function w(){confirm("Are you sure you want to delete this client?")&&(await c.deleteClient(i.value.id),u.back())}return(d,o)=>(k(),K(Ne,{class:"q-pa-md pb-safe"},{default:l(()=>[i.value?(k(),F("div",dt,[h("div",ct,[a(P,{icon:"arrow_back",flat:"",round:"",color:"white",onClick:o[0]||(o[0]=m=>d.$router.back())}),o[5]||(o[5]=h("div",{class:"text-h6 q-ml-sm text-white"},"Client Profile",-1)),a(Ze),a(P,{icon:"more_vert",flat:"",round:"",color:"white"},{default:l(()=>[a(He,{class:"bg-dark text-white border-gold"},{default:l(()=>[a(se,{style:{"min-width":"150px"}},{default:l(()=>[Re((k(),K(j,{clickable:"",class:"text-negative",onClick:w},{default:l(()=>[a(I,{avatar:""},{default:l(()=>[a(Q,{name:"delete"})]),_:1}),a(I,null,{default:l(()=>[...o[4]||(o[4]=[x("Delete",-1)])]),_:1})]),_:1})),[[Je]])]),_:1})]),_:1})]),_:1})]),a(Me,{class:"bg-card-gradient q-mb-md"},{default:l(()=>[a(Ue,{class:"text-center q-py-lg"},{default:l(()=>[a(Oe,{size:"80px","font-size":"32px",color:"primary","text-color":"dark",class:"shadow-10"},{default:l(()=>[x(q(_(i.value.name)),1)]),_:1}),h("div",mt,q(i.value.name),1),h("div",vt,q(i.value.company),1),h("div",pt,[a(re,{color:g(i.value.status),"text-color":"white",icon:"flag"},{default:l(()=>[x(q(i.value.status),1)]),_:1},8,["color"]),a(re,{color:"dark","text-color":"grey",icon:"trending_up"},{default:l(()=>[x(q(i.value.pipelineStage),1)]),_:1})])]),_:1}),a(oe,{color:"grey-9"}),a(Ke,{align:"around",class:"q-py-md"},{default:l(()=>[a(P,{flat:"",class:"column items-center text-white",href:"tel:"+i.value.phone},{default:l(()=>[a(Q,{name:"phone",color:"primary",size:"md"}),o[6]||(o[6]=h("span",{class:"text-caption q-mt-xs"},"Call",-1))]),_:1},8,["href"]),a(P,{flat:"",class:"column items-center text-white",href:"mailto:"+i.value.email},{default:l(()=>[a(Q,{name:"email",color:"accent",size:"md"}),o[7]||(o[7]=h("span",{class:"text-caption q-mt-xs"},"Email",-1))]),_:1},8,["href"]),a(P,{flat:"",class:"column items-center text-white"},{default:l(()=>[a(Q,{name:"calendar_month",color:"info",size:"md"}),o[8]||(o[8]=h("span",{class:"text-caption q-mt-xs"},"Book",-1))]),_:1})]),_:1})]),_:1}),a(Fe,{modelValue:t.value,"onUpdate:modelValue":o[1]||(o[1]=m=>t.value=m),class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[a(X,{name:"activity",label:"Activity"}),a(X,{name:"info",label:"Info"}),a(X,{name:"sales",label:"Sales"})]),_:1},8,["modelValue"]),a(oe,{color:"grey-9",class:"q-mb-md"}),a(rt,{modelValue:t.value,"onUpdate:modelValue":o[3]||(o[3]=m=>t.value=m),animated:"",class:"bg-transparent text-white"},{default:l(()=>[a(Y,{name:"activity",class:"q-pa-none"},{default:l(()=>[o[9]||(o[9]=h("div",{class:"text-h6 q-mb-md"},"Interaction History",-1)),a(et,{color:"primary"},{default:l(()=>[(k(!0),F(Xe,null,Ye(f.value,(m,S)=>(k(),K(Ge,{key:S,title:m.title,subtitle:m.date,color:m.color,icon:m.icon},{default:l(()=>[h("div",ft,q(m.desc),1)]),_:2},1032,["title","subtitle","color","icon"]))),128))]),_:1}),a(We,{modelValue:s.value,"onUpdate:modelValue":o[2]||(o[2]=m=>s.value=m),filled:"",dark:"",label:"Add a note...",type:"textarea",rows:"3",class:"q-mt-lg"},{after:l(()=>[a(P,{round:"",dense:"",flat:"",icon:"send",color:"primary"})]),_:1},8,["modelValue"])]),_:1}),a(Y,{name:"info"},{default:l(()=>[a(se,{separator:"",dark:""},{default:l(()=>[a(j,null,{default:l(()=>[a(I,null,{default:l(()=>[a(T,{caption:""},{default:l(()=>[...o[10]||(o[10]=[x("Email",-1)])]),_:1}),a(T,null,{default:l(()=>[x(q(i.value.email),1)]),_:1})]),_:1})]),_:1}),a(j,null,{default:l(()=>[a(I,null,{default:l(()=>[a(T,{caption:""},{default:l(()=>[...o[11]||(o[11]=[x("Phone",-1)])]),_:1}),a(T,null,{default:l(()=>[x(q(i.value.phone),1)]),_:1})]),_:1})]),_:1}),a(j,null,{default:l(()=>[a(I,null,{default:l(()=>[a(T,{caption:""},{default:l(()=>[...o[12]||(o[12]=[x("Job Title",-1)])]),_:1}),a(T,null,{default:l(()=>[x(q(i.value.title),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(Y,{name:"sales"},{default:l(()=>[h("div",gt,[a(Q,{name:"receipt_long",size:"4rem"}),o[13]||(o[13]=h("div",{class:"q-mt-md"},"No invoices yet.",-1)),a(P,{label:"Create Quote",color:"primary",outline:"",class:"q-mt-md"})])]),_:1})]),_:1},8,["modelValue"])])):(k(),F("div",ut,[a(ze,{color:"primary",size:"3em"})]))]),_:1}))}},xt=$e(yt,[["__scopeId","data-v-4d8985ab"]]);export{xt as default};
