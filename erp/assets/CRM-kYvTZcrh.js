import{c as L,u as B,a as D,h as P,b as S,r as w,d as T,e as h,o as c,w as n,f as t,Q as z,g as A,i as R,j as y,k as V,l as N,m as e,n as p,p as x,_ as I,s as F,q as j,t as C,v as E,x as G,y as g,z as u,A as H,B as q,C as J,F as K,D as O,E as W,G as X}from"./index-ooLxYGq-.js";import{Q as Y}from"./QBadge-ClWeofGF.js";import{Q as Z}from"./QPageSticky-0sEzfhXY.js";import{Q}from"./QSelect-DRVR_CrW.js";import{Q as ee}from"./QForm-BY5m1IBc.js";import{C as te}from"./ClosePopup-DP9AVQP7.js";import"./QMenu-B7m3y_B1.js";const ae='<circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="60" cy="15" r="9" fill-opacity=".3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from=".5" to=".5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle>',le=L({name:"QSpinnerDots",props:B,setup(b){const{cSize:d,classes:f}=D(b);return()=>P("svg",{class:f.value,fill:"currentColor",width:d.value,height:d.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",innerHTML:ae})}}),se={class:"row q-col-gutter-sm"},oe={class:"col-12"},ie={class:"col-12"},ne={class:"col-12"},re={class:"row q-col-gutter-sm"},de={class:"col-12"},ue={class:"col-12"},ce={class:"row q-col-gutter-sm"},me={class:"col-6"},pe={class:"col-6"},fe={class:"q-mt-xl"},ve={__name:"AddClientDialog",emits:["close"],setup(b,{emit:d}){const f=d,_=S(),v=w(!1),l=T({name:"",company:"",title:"",email:"",phone:"",status:"Lead",pipelineStage:"New"});async function m(){v.value=!0,await _.addClient(l),v.value=!1,f("close")}return(k,a)=>(c(),h(x,{class:"bg-dark text-white q-pb-xl"},{default:n(()=>[t(z,{class:"bg-dark text-white"},{default:n(()=>[t(R,null,{default:n(()=>[...a[7]||(a[7]=[y("New Contact",-1)])]),_:1}),A(t(V,{flat:"",round:"",dense:"",icon:"close"},null,512),[[te]])]),_:1}),t(N,null,{default:n(()=>[t(ee,{onSubmit:m,class:"q-gutter-md"},{default:n(()=>[e("div",se,[e("div",oe,[t(p,{modelValue:l.name,"onUpdate:modelValue":a[0]||(a[0]=s=>l.name=s),label:"Full Name",filled:"",dark:"",color:"primary",rules:[s=>!!s||"Required"]},null,8,["modelValue","rules"])]),e("div",ie,[t(p,{modelValue:l.company,"onUpdate:modelValue":a[1]||(a[1]=s=>l.company=s),label:"Company",filled:"",dark:"",color:"primary"},null,8,["modelValue"])]),e("div",ne,[t(p,{modelValue:l.title,"onUpdate:modelValue":a[2]||(a[2]=s=>l.title=s),label:"Job Title",filled:"",dark:"",color:"primary"},null,8,["modelValue"])])]),a[8]||(a[8]=e("div",{class:"text-subtitle2 text-primary q-mt-md"},"Contact Info",-1)),e("div",re,[e("div",de,[t(p,{modelValue:l.email,"onUpdate:modelValue":a[3]||(a[3]=s=>l.email=s),label:"Email",type:"email",filled:"",dark:"",color:"primary"},null,8,["modelValue"])]),e("div",ue,[t(p,{modelValue:l.phone,"onUpdate:modelValue":a[4]||(a[4]=s=>l.phone=s),label:"Phone",type:"tel",filled:"",dark:"",color:"primary"},null,8,["modelValue"])])]),a[9]||(a[9]=e("div",{class:"text-subtitle2 text-primary q-mt-md"},"Status",-1)),e("div",ce,[e("div",me,[t(Q,{modelValue:l.status,"onUpdate:modelValue":a[5]||(a[5]=s=>l.status=s),options:["Lead","Prospect","Client"],label:"Status",filled:"",dark:"",color:"primary"},null,8,["modelValue"])]),e("div",pe,[t(Q,{modelValue:l.pipelineStage,"onUpdate:modelValue":a[6]||(a[6]=s=>l.pipelineStage=s),options:["New","Contacted","Meeting","Closed"],label:"Stage",filled:"",dark:"",color:"primary"},null,8,["modelValue"])])]),e("div",fe,[t(V,{label:"Create Contact",type:"submit",color:"primary",class:"full-width q-py-md text-weight-bold shadow-20",loading:v.value},null,8,["loading"])])]),_:1})]),_:1})]),_:1}))}},ge={class:"row q-col-gutter-sm q-mb-md"},ye={class:"col-6 col-md-3"},_e={class:"text-h6 text-white"},xe={class:"col-6 col-md-3"},be={class:"text-h6 text-white"},Ce={key:0,class:"row justify-center q-mt-xl"},we={key:1,class:"q-gutter-y-sm"},he={class:"row items-center no-wrap"},Ve={class:"col"},ke={class:"text-h6 text-white ellipsis"},qe={class:"text-caption text-grey ellipsis"},Qe={key:0},Se={class:"col-auto text-right"},Ne={class:"text-caption text-grey q-mt-xs"},$e={key:0,class:"text-center text-grey q-mt-lg"},Me={__name:"CRM",setup(b){const d=S(),f=G(),{clients:_,loading:v}=F(d),l=w(!1),m=w("");j(()=>{d.init()});const k=C(()=>d.leads.length),a=C(()=>d.activeClients.length),s=C(()=>{if(!m.value)return _.value;const r=m.value.toLowerCase();return _.value.filter(o=>o.name.toLowerCase().includes(r)||o.company&&o.company.toLowerCase().includes(r))});function $(r){return r?r.substring(0,2).toUpperCase():"??"}function M(r){switch(r){case"Lead":return"blue-grey";case"Prospect":return"info";case"Client":return"positive";case"Churned":return"negative";default:return"grey"}}function U(r){f.push({name:"client-detail",params:{id:r.id}})}return(r,o)=>(c(),h(E,{class:"q-pa-md pb-safe"},{default:n(()=>[o[6]||(o[6]=e("div",{class:"row items-center justify-between q-mb-md"},[e("div",null,[e("div",{class:"text-h4 text-primary"},"CRM"),e("div",{class:"text-caption text-grey"},"Manage your relationships")])],-1)),e("div",ge,[e("div",ye,[t(x,{class:"bg-card-glass text-center q-py-sm"},{default:n(()=>[e("div",_e,u(k.value),1),o[4]||(o[4]=e("div",{class:"text-caption text-grey"},"Leads",-1))]),_:1})]),e("div",xe,[t(x,{class:"bg-card-glass text-center q-py-sm"},{default:n(()=>[e("div",be,u(a.value),1),o[5]||(o[5]=e("div",{class:"text-caption text-grey"},"Active",-1))]),_:1})])]),H(v)?(c(),g("div",Ce,[t(le,{color:"primary",size:"3em"})])):(c(),g("div",we,[t(p,{modelValue:m.value,"onUpdate:modelValue":o[0]||(o[0]=i=>m.value=i),placeholder:"Search clients...",dense:"",outlined:"",dark:"",color:"primary",class:"q-mb-md"},{append:n(()=>[t(J,{name:"search"})]),_:1},8,["modelValue"]),(c(!0),g(K,null,O(s.value,i=>(c(),h(x,{key:i.id,class:"bg-card client-card cursor-pointer",onClick:Ue=>U(i)},{default:n(()=>[t(N,null,{default:n(()=>[e("div",he,[t(W,{size:"42px","font-size":"20px",color:"primary","text-color":"dark",class:"q-mr-md"},{default:n(()=>[y(u($(i.name)),1)]),_:2},1024),e("div",Ve,[e("div",ke,u(i.name),1),e("div",qe,[y(u(i.company)+" ",1),i.company?(c(),g("span",Qe,"â€¢")):q("",!0),y(" "+u(i.title),1)])]),e("div",Se,[t(Y,{color:M(i.status)},{default:n(()=>[y(u(i.status),1)]),_:2},1032,["color"]),e("div",Ne,u(i.pipelineStage),1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128)),s.value.length===0?(c(),g("div",$e," No clients found. Add one to get started! ")):q("",!0)])),t(Z,{position:"bottom-right",offset:[18,18]},{default:n(()=>[t(V,{fab:"",icon:"add",color:"primary",onClick:o[1]||(o[1]=i=>l.value=!0)})]),_:1}),t(X,{modelValue:l.value,"onUpdate:modelValue":o[3]||(o[3]=i=>l.value=i),position:"bottom",maximized:""},{default:n(()=>[t(ve,{onClose:o[2]||(o[2]=i=>l.value=!1)})]),_:1},8,["modelValue"])]),_:1}))}},Re=I(Me,[["__scopeId","data-v-f4cd236a"]]);export{Re as default};
