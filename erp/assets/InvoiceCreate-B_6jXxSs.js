import{_ as S,b as h,s as Q,r as u,q as U,t as f,e as $,w as n,v as B,x as N,o as m,m as t,f as l,k as i,p as _,l as y,A as D,y as k,F,D as j,n as p,j as M,z as T,aG as z}from"./index-CbDRgnMc.js";import{Q as A}from"./QSelect-_JWn2mpf.js";import{u as L}from"./sales-qqrjpnJI.js";import"./QMenu-DLozQkxR.js";const P={class:"row items-center q-mb-lg"},R={class:"row items-center justify-between q-mb-sm"},E={class:"col-6"},G={class:"col-2"},W={class:"col-3"},H={class:"col-1 text-center"},J={class:"row justify-end q-mb-xl"},K={class:"col-6 text-right"},O={class:"text-h6 text-white"},X={class:"text-primary"},Y={class:"row q-gutter-md"},Z={__name:"InvoiceCreate",setup(ee){const v=h(),V=L(),g=N(),{clients:q}=Q(v),d=u(null),a=u([{desc:"Web Development Services",qty:1,price:1500}]),c=u(!1);U(()=>{v.init()});const x=f(()=>a.value.reduce((r,e)=>r+e.qty*e.price,0)),C=f(()=>d.value&&a.value.length>0);function w(){a.value.push({desc:"",qty:1,price:0})}async function I(){c.value=!0,await V.createInvoice({clientId:d.value.id,clientName:d.value.name,items:a.value}),c.value=!1,g.replace("/sales")}return(r,e)=>(m(),$(B,{class:"q-pa-md pb-safe"},{default:n(()=>[t("div",P,[l(i,{flat:"",round:"",icon:"arrow_back",color:"white",onClick:e[0]||(e[0]=s=>r.$router.back())}),e[3]||(e[3]=t("div",{class:"text-h5 text-white q-ml-sm"},"New Invoice",-1))]),l(_,{class:"bg-card q-mb-md"},{default:n(()=>[l(y,null,{default:n(()=>[e[4]||(e[4]=t("div",{class:"text-subtitle2 text-primary q-mb-sm"},"Client",-1)),l(A,{modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=s=>d.value=s),options:D(q),"option-label":"name",label:"Select Client",filled:"",dark:"",color:"primary"},null,8,["modelValue","options"])]),_:1})]),_:1}),l(_,{class:"bg-card q-mb-md"},{default:n(()=>[l(y,null,{default:n(()=>[t("div",R,[e[5]||(e[5]=t("div",{class:"text-subtitle2 text-primary"},"Line Items",-1)),l(i,{flat:"",dense:"",icon:"add",color:"positive",label:"Add Item",onClick:w})]),(m(!0),k(F,null,j(a.value,(s,b)=>(m(),k("div",{key:b,class:"row q-col-gutter-sm q-mb-sm animate-fade"},[t("div",E,[l(p,{modelValue:s.desc,"onUpdate:modelValue":o=>s.desc=o,label:"Description",dense:"",filled:"",dark:""},null,8,["modelValue","onUpdate:modelValue"])]),t("div",G,[l(p,{modelValue:s.qty,"onUpdate:modelValue":o=>s.qty=o,modelModifiers:{number:!0},label:"Qty",type:"number",dense:"",filled:"",dark:""},null,8,["modelValue","onUpdate:modelValue"])]),t("div",W,[l(p,{modelValue:s.price,"onUpdate:modelValue":o=>s.price=o,modelModifiers:{number:!0},label:"Price",type:"number",dense:"",filled:"",dark:"",prefix:"$"},null,8,["modelValue","onUpdate:modelValue"])]),t("div",H,[l(i,{flat:"",round:"",icon:"delete",color:"negative",size:"sm",onClick:o=>a.value.splice(b,1)},null,8,["onClick"])])]))),128))]),_:1})]),_:1}),t("div",J,[t("div",K,[t("div",O,[e[6]||(e[6]=M("Total: ",-1)),t("span",X,"$"+T(x.value.toFixed(2)),1)])])]),l(z,{class:"bg-dark gl-border-t q-pa-md"},{default:n(()=>[t("div",Y,[l(i,{flat:"",label:"Cancel",color:"grey",class:"col",onClick:e[2]||(e[2]=s=>r.$router.back())}),l(i,{label:"Create Invoice",color:"primary",class:"col text-weight-bold shadow-10",disable:!C.value,loading:c.value,onClick:I},null,8,["disable","loading"])])]),_:1})]),_:1}))}},oe=S(Z,[["__scopeId","data-v-cc540175"]]);export{oe as default};
