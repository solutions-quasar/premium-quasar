// Premium Quasar ERP - Translation Service
export const translations = {
    en: {
        // UI Shell
        "nav_dashboard": "Dashboard",
        "nav_crm": "Clients",
        "nav_prospection": "Prospection",
        "nav_automations": "Neural Automations",
        "nav_leads": "Leads",
        "nav_leadhunter": "Lead Hunter",
        "nav_coldcall": "Cold Call",
        "nav_followup": "Follow-up",
        "nav_calendar": "Calendar",
        "nav_sales": "Invoice / Quote",
        "nav_cashflow": "Cashflow",
        "nav_demos": "Web Demos",
        "nav_team": "Team",
        "nav_ai_agents": "AI Agents",
        "nav_emails": "Email Templates",
        "nav_account": "My Account",
        "nav_logout": "Logout",
        "nav_admin": "Admin User",
        "nav_super_admin": "Super Admin",

        // Login View
        "login_title": "Premium Quasar",
        "login_subtitle": "Enterprise Resource Planning System",
        "login_email_label": "Email Access ID",
        "login_email_placeholder": "Enter your email",
        "login_password_label": "Password",
        "login_remember_email": "Remember Email",
        "login_stay_connected": "Stay Connected",
        "login_btn": "Authenticate",
        "login_authenticating": "AUTHENTICATING...",
        "login_forgot": "Forgot Credentials?",

        // Common Actions
        "btn_cancel": "Cancel",
        "btn_save": "Save",
        "btn_delete": "Delete",
        "btn_edit": "Edit",
        "btn_view": "View",
        "btn_add": "Add",
        "btn_loading": "Loading...",

        // Dashboard
        "dash_title": "Business Dashboard",
        "dash_manage_transactions": "Manage All Transactions",
        "dash_quick_revenue": "Quick Revenue",
        "dash_quick_expense": "Quick Expense",
        "dash_net_cashflow": "Net Cashflow",
        "dash_revenue_month": "Revenue (This Month)",
        "dash_total_revenue": "Total Revenue",
        "dash_total_expenses": "Total Expenses",
        "dash_website_leads": "New Website Leads",
        "dash_view_all": "View All",
        "dash_upcoming_events": "Upcoming Events",
        "dash_no_events": "No upcoming events found",
        "dash_view_calendar": "View Calendar",
        "dash_due_invoices": "Due Invoices",
        "dash_no_invoices": "No overdue invoices",
        "dash_manage_invoices": "Manage Invoices",
        "dash_record_revenue": "Record Revenue",
        "dash_record_expense": "Record Expense",
        "dash_description": "Description",
        "dash_amount": "Amount ($)",
        "dash_recurring": "Recurring Monthly",
        "dash_no_website_leads": "No new website leads at the moment",
        "dash_checking_leads": "Checking for new leads...",

        // CRM
        "crm_title": "Clients & CRM",
        "crm_new_client": "New Client",
        "crm_search_placeholder": "Search clients...",
        "crm_loading": "Loading clients...",
        "crm_no_clients": "No clients found. Use the menu to Seed Data.",
        "crm_status_active": "Active",
        "crm_status_inactive": "Inactive",
        "crm_status_prospect": "Prospect",
        "crm_no_email": "No Email",
        "crm_lifetime_revenue": "Lifetime Revenue",
        "crm_total_invoices": "Total Invoices",
        "crm_total_quotes": "Total Quotes",
        "crm_company_info": "Company Info",
        "crm_company_name": "Company Name",
        "crm_phone": "Phone",
        "crm_address": "Address",
        "crm_city": "City",
        "crm_state": "State",
        "crm_zip": "Zip",
        "crm_found": "found",
        "crm_no_invoices": "No invoices found",
        "crm_no_quotes": "No quotes found",
        "crm_save_success": "Client updated successfully",
        "crm_save_error": "Error updating client",
        "crm_add_success": "Client added successfully",
        "crm_add_error": "Error adding client",
        "crm_email": "Email",
        "crm_name": "Full Name",

        // Leads
        "leads_title": "Leads Pipeline",
        "leads_search_placeholder": "Search leads...",
        "leads_new_lead": "New Lead",
        "leads_import_csv": "Import CSV",
        "leads_go_to_hunter": "Go to Hunter",
        "leads_all_industries": "All Industries",
        "leads_all_regions": "All Regions",
        "leads_all_pain_points": "All Pain Points",
        "leads_loading_filters": "Loading filters...",
        "leads_status_new": "New",
        "leads_status_approved": "Approved",
        "leads_status_contacted": "Contacted",
        "leads_status_audited": "Audited",
        "leads_status_all": "All",
        "leads_no_leads": "No leads found",
        "leads_adjust_search": "Try adjusting your search or filter.",
        "leads_found_via": "Found via",
        "leads_fetching": "Fetching leads...",
        "leads_error_loading": "Error loading leads.",
        "leads_business_name": "Business Name",
        "leads_source_query": "Source / Query",
        "leads_result_type": "Result Type",
        "leads_page_2": "Page 2+",
        "leads_pain_points": "Pain Points",
        "leads_company_address": "Company Address",
        "leads_official_website": "Official Website",
        "leads_city": "City",
        "leads_state_prov": "State/Prov",
        "leads_phone": "Phone",
        "leads_public_email": "Public Email",
        "leads_governance": "Governance / Decision Maker",
        "leads_contact_name": "Contact Name",
        "leads_direct_email": "Direct Email",
        "leads_direct_phone": "Direct Phone / extension",
        "leads_assigned_agent": "Assigned Agent",
        "leads_strategic_notes": "Strategic Internal Notes",
        "leads_notes_placeholder": "Prospecting notes, points or conversation history...",
        "leads_seo_performance": "SEO & Performance",
        "leads_load_time": "Load",
        "leads_ai_audit_saved": "AI Audit Saved",
        "leads_audited_at": "Audited",
        "leads_view_report": "View Report",
        "leads_run_new_audit": "Run New Audit",
        "leads_no_audit": "No AI Audit performed yet.",
        "leads_run_deep_audit": "RUN DEEP AI AUDIT",
        "leads_compose": "COMPOSE",
        "leads_save_updates": "SAVE UPDATES",
        "leads_verify_rank": "Verify Rank",
        "leads_approve": "APPROVE",
        "leads_reject": "Reject",
        "leads_live_insight": "Live Website Insight",
        "leads_mobile": "Mobile",
        "leads_tablet": "Tablet",
        "leads_desktop": "Desktop",
        "leads_width": "Width",
        "leads_site_blocked": "Site Blocked?",
        "leads_screenshot": "Screenshot",
        "leads_no_preview": "No Website URL to Preview",

        // Cashflow
        "cf_title": "Cashflow Management",
        "cf_add_revenue": "Add Revenue",
        "cf_add_expense": "Add Expense",
        "cf_manual_revenue": "Manual Revenue",
        "cf_all_expenses": "All Expenses",
        "cf_recurring_items": "Recurring Items",
        "cf_loading": "Loading...",
        "cf_no_entries": "No entries found",
        "cf_error_loading": "Error loading data",
        "cf_delete_confirm": "Are you sure you want to delete this entry?",
        "cf_delete_success": "Entry deleted",
        "cf_delete_error": "Delete failed",
        "cf_description": "Description",
        "cf_amount": "Amount ($)",
        "cf_make_recurring": "Make Recurring Monthly",
        "cf_save_revenue": "Save Revenue",
        "cf_save_expense": "Save Expense",
        "cf_category": "Category",
        "cf_cat_tools": "Tools/Software",
        "cf_cat_marketing": "Marketing",
        "cf_cat_salary": "Salary",
        "cf_cat_rent": "Rent/Office",
        "cf_cat_other": "Other",
        "cf_revenue_recorded": "Revenue recorded",
        "cf_expense_recorded": "Expense recorded",
        "cf_fill_required": "Please fill in description and amount",

        // Team
        "team_title": "Sales Team",
        "team_add_member": "Add Member",
        "team_loading": "Loading team...",
        "team_no_members": "No team members found. Add one to get started.",
        "team_role_default": "Sales Representative",
        "team_role_manager": "Sales Manager",
        "team_remove": "Remove",
        "team_error_loading": "Error loading team.",
        "team_add_title": "Add Team Member",
        "team_full_name": "Full Name",
        "team_email": "Email Address",
        "team_role": "Role",
        "team_fill_required": "Please fill in all fields",
        "team_error_adding": "Error adding member",
        "team_remove_confirm": "Remove this user from the team?",
        "team_no_members_found": "No Team Members Found",
        "team_select_agent": "-- Select Agent --",

        // Sales
        "sales_quotes": "Quotes",
        "sales_invoices": "Invoices",
        "sales_settings": "PDF Settings",
        "sales_new_quote": "New Quote",
        "sales_new_invoice": "New Invoice",
        "sales_loading": "Loading list...",
        "sales_no_items": "No items found",
        "sales_error_loading": "Error loading sales list",
        "sales_number": "Number",
        "sales_client": "Client",
        "sales_amount": "Amount",
        "sales_status": "Status",
        "sales_actions": "Actions",
        "sales_edit": "Edit",
        "sales_delete": "Delete",
        "sales_convert": "Convert to Invoice",
        "sales_send": "Send Email",
        "sales_pdf": "PDF",
        "sales_pay_link": "Pay Link",
        "sales_title": "Invoice / Quote",
        "sales_editor_title": "Invoice / Quote Editor",
        "sales_doc_type": "Document Type",
        "sales_doc_number": "Document #",
        "sales_doc_date": "Date",
        "sales_doc_client": "Client Information",
        "sales_doc_details": "Document Details",
        "sales_doc_items": "Line Items",
        "sales_item_desc": "Description",
        "sales_item_qty": "Qty",
        "sales_item_price": "Price",
        "sales_item_total": "Total",
        "sales_add_item": "Add Item",
        "sales_doc_taxes": "Taxes",
        "sales_add_tax": "Add Tax",
        "sales_doc_notes": "Notes / Snippets",
        "sales_doc_footer": "Footer / Conditions",
        "sales_subtotal": "Subtotal",
        "sales_grand_total": "Grand Total",
        "sales_save": "SAVE DOCUMENT",
        "sales_save_tpl": "Save as Template",
        "sales_load_tpl": "Load Template",
        "sales_confirm_delete": "Are you sure you want to delete this document?",
        "sales_delete_success": "Document deleted",
        "sales_save_success": "Document saved successfully",
        "sales_save_error": "Error saving document",

        // Emails
        "emails_title": "Email Templates",
        "emails_loading": "Loading templates...",
        "emails_no_templates": "No templates found. Create one to enable AI emailing.",
        "emails_new": "New Template",
        "emails_edit": "Edit Template",
        "emails_template_id": "Template ID (slug)",
        "emails_subject": "Subject",
        "emails_content": "Email Content (HTML supported)",
        "emails_placeholders_hint": "Use {{placeholder}} for dynamic values.",
        "emails_save_success": "Template saved successfully",
        "emails_delete_confirm": "Delete this template?",

        // Demos
        "demos_title": "Web Demos & Templates",
        "demos_subtitle": "Manage white-label portfolio demos for your clients.",
        "demos_new": "Create New Demo",
        "demos_loading": "Synchronizing templates...",
        "demos_no_items": "No demos found. Start by creating a white-label template.",
        "demos_view": "View Demo",
        "demos_edit": "Edit Settings",
        "demos_delete_confirm": "Delete this demo template?"
    },
    fr: {
        // UI Shell
        "nav_dashboard": "Tableau de Bord",
        "nav_crm": "Clients",
        "nav_prospection": "Prospection",
        "nav_automations": "Automations Intelligence",
        "nav_leads": "Leads",
        "nav_leadhunter": "Chasseur de Leads",
        "nav_coldcall": "Appels à Froid",
        "nav_followup": "Suivi",
        "nav_calendar": "Calendrier",
        "nav_sales": "Facture / Devis",
        "nav_cashflow": "Trésorerie",
        "nav_demos": "Démos Web",
        "nav_team": "Équipe",
        "nav_ai_agents": "Agents IA",
        "nav_emails": "Modèles de Courriel",
        "nav_account": "Mon Compte",
        "nav_logout": "Déconnexion",
        "nav_admin": "Administrateur",
        "nav_super_admin": "Super Administrateur",

        // Login View
        "login_title": "Premium Quasar",
        "login_subtitle": "Système de Planification des Ressources",
        "login_email_label": "Identifiant d'accès",
        "login_email_placeholder": "Entrez votre courriel",
        "login_password_label": "Mot de passe",
        "login_remember_email": "Mémoriser le courriel",
        "login_stay_connected": "Rester connecté",
        "login_btn": "S'authentifier",
        "login_authenticating": "AUTHENTIFICATION...",
        "login_forgot": "Identifiants oubliés ?",

        // Common Actions
        "btn_cancel": "Annuler",
        "btn_save": "Enregistrer",
        "btn_delete": "Supprimer",
        "btn_edit": "Modifier",
        "btn_view": "Voir",
        "btn_add": "Ajouter",
        "btn_loading": "Chargement...",

        // Dashboard
        "dash_title": "Tableau de Bord",
        "dash_manage_transactions": "Gérer toutes les transactions",
        "dash_quick_revenue": "Revenu Rapide",
        "dash_quick_expense": "Dépense Rapide",
        "dash_net_cashflow": "Flux de Trésorerie Net",
        "dash_revenue_month": "Revenu (Ce Mois)",
        "dash_total_revenue": "Revenu Total",
        "dash_total_expenses": "Dépenses Totales",
        "dash_website_leads": "Nouveaux Leads Site Web",
        "dash_view_all": "Voir Tout",
        "dash_upcoming_events": "Événements à Venir",
        "dash_no_events": "Aucun événement à venir",
        "dash_view_calendar": "Voir Calendrier",
        "dash_due_invoices": "Factures Dues",
        "dash_no_invoices": "Aucune facture en retard",
        "dash_manage_invoices": "Gérer Factures",
        "dash_record_revenue": "Enregistrer un revenu",
        "dash_record_expense": "Enregistrer une dépense",
        "dash_description": "Description",
        "dash_amount": "Montant ($)",
        "dash_recurring": "Récurrent mensuel",
        "dash_no_website_leads": "Aucun nouveau prospect site web pour le moment",
        "dash_checking_leads": "Vérification des nouveaux prospects...",

        // CRM
        "crm_title": "Gestion des Clients",
        "crm_new_client": "Nouveau Client",
        "crm_search_placeholder": "Rechercher des clients...",
        "crm_loading": "Chargement des clients...",
        "crm_no_clients": "Aucun client trouvé. Utilisez le menu pour importer des données.",
        "crm_status_active": "Actif",
        "crm_status_inactive": "Inactif",
        "crm_status_prospect": "Prospect",
        "crm_no_email": "Pas de courriel",
        "crm_lifetime_revenue": "Revenu à vie",
        "crm_total_invoices": "Total Factures",
        "crm_total_quotes": "Total Devis",
        "crm_company_info": "Infos Entreprise",
        "crm_company_name": "Nom de l'entreprise",
        "crm_phone": "Téléphone",
        "crm_address": "Adresse",
        "crm_city": "Ville",
        "crm_state": "Province/État",
        "crm_zip": "Code Postal",
        "crm_found": "trouvé(s)",
        "crm_no_invoices": "Aucune facture trouvée",
        "crm_no_quotes": "Aucun devis trouvé",
        "crm_save_success": "Client mis à jour avec succès",
        "crm_save_error": "Erreur lors de la mise à jour",
        "crm_add_success": "Client ajouté avec succès",
        "crm_add_error": "Erreur lors de l'ajout",
        "crm_email": "Courriel",
        "crm_name": "Nom Complet",

        // Leads
        "leads_title": "Pipeline de Prospects",
        "leads_search_placeholder": "Rechercher des prospects...",
        "leads_new_lead": "Nouveau Prospect",
        "leads_import_csv": "Importer CSV",
        "leads_go_to_hunter": "Aller à Hunter",
        "leads_all_industries": "Toutes les Industries",
        "leads_all_regions": "Toutes les Régions",
        "leads_all_pain_points": "Tous les Points de Douleur",
        "leads_loading_filters": "Chargement des filtres...",
        "leads_status_new": "Nouveau",
        "leads_status_approved": "Approuvé",
        "leads_status_contacted": "Contacté",
        "leads_status_audited": "Audité",
        "leads_status_all": "Tous",
        "leads_no_leads": "Aucun prospect trouvé",
        "leads_adjust_search": "Essayez d'ajuster votre recherche ou filtre.",
        "leads_found_via": "Trouvé via",
        "leads_fetching": "Chargement des prospects...",
        "leads_error_loading": "Erreur lors du chargement des prospects.",
        "leads_business_name": "Nom de l'entreprise",
        "leads_source_query": "Source / Requête",
        "leads_result_type": "Type de résultat",
        "leads_page_2": "Page 2+",
        "leads_pain_points": "Points de Douleur",
        "leads_company_address": "Adresse de l'entreprise",
        "leads_official_website": "Site Officiel",
        "leads_city": "Ville",
        "leads_state_prov": "Province/État",
        "leads_phone": "Téléphone",
        "leads_public_email": "Courriel Public",
        "leads_governance": "Gouvernance / Décideur",
        "leads_contact_name": "Nom du contact",
        "leads_direct_email": "Courriel Direct",
        "leads_direct_phone": "Téléphone Direct / poste",
        "leads_assigned_agent": "Agent Assigné",
        "leads_strategic_notes": "Notes Internes Stratégiques",
        "leads_notes_placeholder": "Notes de prospection, points ou historique...",
        "leads_seo_performance": "SEO & Performance",
        "leads_load_time": "Chargement",
        "leads_ai_audit_saved": "Audit IA Enregistré",
        "leads_audited_at": "Audité",
        "leads_view_report": "Voir le Rapport",
        "leads_run_new_audit": "Nouvel Audit",
        "leads_no_audit": "Aucun audit IA effectué.",
        "leads_run_deep_audit": "LANCER L'AUDIT IA",
        "leads_compose": "RÉDIGER",
        "leads_save_updates": "ENREGISTRER MISES À JOUR",
        "leads_verify_rank": "Vérifier le Rang",
        "leads_approve": "APPROUVER",
        "leads_reject": "Rejeter",
        "leads_live_insight": "Aperçu Site Web en Direct",
        "leads_mobile": "Mobile",
        "leads_tablet": "Tablette",
        "leads_desktop": "Ordinateur",
        "leads_width": "Largeur",
        "leads_site_blocked": "Site Bloqué ?",
        "leads_screenshot": "Capture",
        "leads_no_preview": "Aucun site web à prévisualiser",

        // Cashflow
        "cf_title": "Gestion du Flux de Trésorerie",
        "cf_add_revenue": "Ajouter un Revenu",
        "cf_add_expense": "Ajouter une Dépense",
        "cf_manual_revenue": "Revenu Manuel",
        "cf_all_expenses": "Toutes les Dépenses",
        "cf_recurring_items": "Articles Récurrents",
        "cf_loading": "Chargement...",
        "cf_no_entries": "Aucune entrée trouvée",
        "cf_error_loading": "Erreur lors du chargement",
        "cf_delete_confirm": "Êtes-vous sûr de vouloir supprimer cette entrée ?",
        "cf_delete_success": "Entrée supprimée",
        "cf_delete_error": "Échec de la suppression",
        "cf_description": "Description",
        "cf_amount": "Montant ($)",
        "cf_make_recurring": "Rendre récurrent mensuellement",
        "cf_save_revenue": "Enregistrer le Revenu",
        "cf_save_expense": "Enregistrer la Dépense",
        "cf_category": "Catégorie",
        "cf_cat_tools": "Outils/Logiciels",
        "cf_cat_marketing": "Marketing",
        "cf_cat_salary": "Salaire",
        "cf_cat_rent": "Loyer/Bureau",
        "cf_cat_other": "Autre",
        "cf_revenue_recorded": "Revenu enregistré",
        "cf_expense_recorded": "Dépense enregistrée",
        "cf_fill_required": "Veuillez remplir la description et le montant",

        // Team
        "team_title": "Équipe de Vente",
        "team_add_member": "Ajouter un Membre",
        "team_loading": "Chargement de l'équipe...",
        "team_no_members": "Aucun membre trouvé. Ajoutez-en un pour commencer.",
        "team_role_default": "Représentant des Ventes",
        "team_role_manager": "Gestionnaire des Ventes",
        "team_remove": "Supprimer",
        "team_error_loading": "Erreur lors du chargement de l'équipe.",
        "team_add_title": "Ajouter un Membre de l'Équipe",
        "team_full_name": "Nom Complet",
        "team_email": "Adresse Courriel",
        "team_role": "Rôle",
        "team_fill_required": "Veuillez remplir tous les champs",
        "team_error_adding": "Erreur lors de l'ajout du membre",
        "team_remove_confirm": "Supprimer cet utilisateur de l'équipe ?",
        "team_no_members_found": "Aucun Membre Trouvé",
        "team_select_agent": "-- Sélectionner un Agent --",

        // Sales
        "sales_quotes": "Devis",
        "sales_invoices": "Factures",
        "sales_settings": "Paramètres PDF",
        "sales_new_quote": "Nouveau Devis",
        "sales_new_invoice": "Nouvelle Facture",
        "sales_loading": "Chargement de la liste...",
        "sales_no_items": "Aucun élément trouvé",
        "sales_error_loading": "Erreur lors du chargement de la liste",
        "sales_number": "Numéro",
        "sales_client": "Client",
        "sales_amount": "Montant",
        "sales_status": "Statut",
        "sales_actions": "Actions",
        "sales_edit": "Modifier",
        "sales_delete": "Supprimer",
        "sales_convert": "Convertir en Facture",
        "sales_send": "Envoyer par Courriel",
        "sales_pdf": "PDF",
        "sales_pay_link": "Lien de Paiement",
        "sales_title": "Facture / Devis",
        "sales_editor_title": "Éditeur de Facture / Devis",
        "sales_doc_type": "Type de Document",
        "sales_doc_number": "Document #",
        "sales_doc_date": "Date",
        "sales_doc_client": "Informations Client",
        "sales_doc_details": "Détails du Document",
        "sales_doc_items": "Articles",
        "sales_item_desc": "Description",
        "sales_item_qty": "Qté",
        "sales_item_price": "Prix",
        "sales_item_total": "Total",
        "sales_add_item": "Ajouter un Article",
        "sales_doc_taxes": "Taxes",
        "sales_add_tax": "Ajouter une Taxe",
        "sales_doc_notes": "Notes / Extraits",
        "sales_doc_footer": "Pied de page / Conditions",
        "sales_subtotal": "Sous-total",
        "sales_grand_total": "Total Global",
        "sales_save": "ENREGISTRER LE DOCUMENT",
        "sales_save_tpl": "Enregistrer comme Modèle",
        "sales_load_tpl": "Charger un Modèle",
        "sales_confirm_delete": "Êtes-vous sûr de vouloir supprimer ce document ?",
        "sales_delete_success": "Document supprimé",
        "sales_save_success": "Document enregistré avec succès",
        "sales_save_error": "Erreur lors de l'enregistrement du document",

        // Emails
        "emails_title": "Modèles de Courriel",
        "emails_loading": "Chargement des modèles...",
        "emails_no_templates": "Aucun modèle trouvé. Créez-en un pour activer l'envoi par l'IA.",
        "emails_new": "Nouveau Modèle",
        "emails_edit": "Modifier le Modèle",
        "emails_template_id": "ID du Modèle (slug)",
        "emails_subject": "Objet",
        "emails_content": "Contenu du Courriel (HTML supporté)",
        "emails_placeholders_hint": "Utilisez {{placeholder}} pour les valeurs dynamiques.",
        "emails_save_success": "Modèle enregistré avec succès",
        "emails_delete_confirm": "Supprimer ce modèle ?",

        // Demos
        "demos_title": "Démos Web & Modèles",
        "demos_subtitle": "Gérez les démos de portfolio en marque blanche pour vos clients.",
        "demos_new": "Créer une Démo",
        "demos_loading": "Synchronisation des modèles...",
        "demos_no_items": "Aucune démo trouvée. Commencez par créer un modèle en marque blanche.",
        "demos_view": "Voir la Démo",
        "demos_edit": "Modifier les Paramètres",
        "demos_delete_confirm": "Supprimer ce modèle de démo ?"
    }
};

let currentLang = localStorage.getItem('erp_lang') || 'en';

export function setLanguage(lang) {
    currentLang = lang;
    localStorage.setItem('erp_lang', lang);
    document.documentElement.lang = lang;
    applyTranslations();
    // Dispatch event for modules to react
    window.dispatchEvent(new CustomEvent('languageChanged', { detail: lang }));
}

export function getCurrentLanguage() {
    return currentLang;
}

export function t(key) {
    if (!translations[currentLang] || !translations[currentLang][key]) {
        return translations['en'][key] || key;
    }
    return translations[currentLang][key];
}

export function applyTranslations() {
    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        const translated = t(key);
        if (translated) {
            // If the element has a material icon span, preserve it
            const icon = el.querySelector('.material-icons');
            if (icon) {
                // Keep the icon and update only the text node
                Array.from(el.childNodes).forEach(node => {
                    if (node.nodeType === 3) node.remove();
                });
                el.appendChild(document.createTextNode(' ' + translated));
            } else {
                el.innerText = translated;
            }
        }
    });

    document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
        const key = el.getAttribute('data-i18n-placeholder');
        const translated = t(key);
        if (translated) el.placeholder = translated;
    });
}
